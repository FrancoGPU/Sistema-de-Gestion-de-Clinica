<app-admin-header></app-admin-header>

<div class="pacientes-formulario-container">
  <div class="container-fluid mt-4">
    <div class="row">
      <div class="col-12">
        <h1>
          <i class="fas fa-user me-2"></i>
          <span>{{ paciente.id ? 'Editar Paciente' : 'Nuevo Paciente' }}</span>
        </h1>
      </div>
    </div>

    <div class="row">
      <div class="col-md-8">
        <div class="card form-card">
          <div class="card-body">
            <form (ngSubmit)="guardarPaciente()" #pacienteForm="ngForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="nombre" class="form-label">Nombre *</label>
                  <input type="text" 
                         class="form-control" 
                         id="nombre"
                         name="nombre"
                         [(ngModel)]="paciente.nombre" 
                         required
                         #nombre="ngModel"
                         [class.is-invalid]="nombre.invalid && nombre.touched">
                  <div class="invalid-feedback" *ngIf="nombre.invalid && nombre.touched">
                    El nombre es requerido
                  </div>
                </div>
                
                <div class="col-md-6 mb-3">
                  <label for="apellido" class="form-label">Apellido *</label>
                  <input type="text" 
                         class="form-control" 
                         id="apellido"
                         name="apellido"
                         [(ngModel)]="paciente.apellido"
                         required
                         #apellido="ngModel"
                         [class.is-invalid]="apellido.invalid && apellido.touched">
                  <div class="invalid-feedback" *ngIf="apellido.invalid && apellido.touched">
                    El apellido es requerido
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="dni" class="form-label">DNI</label>
                  <input type="text" 
                         class="form-control" 
                         id="dni"
                         name="dni"
                         [(ngModel)]="paciente.dni">
                </div>
                
                <div class="col-md-6 mb-3">
                  <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
                  <input type="date" 
                         class="form-control" 
                         id="fechaNacimiento"
                         name="fechaNacimiento"
                         [(ngModel)]="paciente.fechaNacimiento">
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="email" class="form-label">Email</label>
                  <input type="email" 
                         class="form-control" 
                         id="email"
                         name="email"
                         [(ngModel)]="paciente.email"
                         email
                         #email="ngModel"
                         [class.is-invalid]="email.invalid && email.touched">
                  <div class="invalid-feedback" *ngIf="email.invalid && email.touched">
                    Ingrese un email válido
                  </div>
                </div>
                
                <div class="col-md-6 mb-3">
                  <label for="telefono" class="form-label">Teléfono</label>
                  <input type="tel" 
                         class="form-control" 
                         id="telefono"
                         name="telefono"
                         [(ngModel)]="paciente.telefono">
                </div>
              </div>

              <div class="mb-3">
                <label for="direccion" class="form-label">Dirección</label>
                <textarea class="form-control" 
                          id="direccion"
                          name="direccion"
                          [(ngModel)]="paciente.direccion" 
                          rows="3"></textarea>
              </div>

              <div class="d-flex justify-content-between form-actions">
                <a routerLink="/pacientes/lista" class="btn btn-secondary btn-action">
                  <i class="fas fa-arrow-left me-1"></i>Volver
                </a>
                <button type="submit" 
                        class="btn btn-primary btn-action"
                        [disabled]="pacienteForm.invalid">
                  <i class="fas fa-save me-1"></i>Guardar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="card info-card">
          <div class="card-header">
            <h6 class="mb-0">
              <i class="fas fa-info-circle me-1"></i>
              Información
            </h6>
          </div>
          <div class="card-body">
            <p class="text-muted small">
              <i class="fas fa-asterisk text-danger me-1"></i>
              Los campos marcados con asterisco (*) son obligatorios.
            </p>
            <hr>
            <p class="text-muted small mb-0">
              <i class="fas fa-shield-alt text-primary me-1"></i>
              El email y DNI deben ser únicos en el sistema.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
